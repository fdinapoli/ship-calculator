<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ship Production Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #f8fafc;
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255,255,255,0.1);
    }
    h1 {
      text-align: center;
      color: #38bdf8;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
      border-radius: 6px;
      border: none;
      background: #1e293b;
      color: white;
    }
    button {
      margin-top: 20px;
      padding: 10px 15px;
      background: #38bdf8;
      color: #0f172a;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background: #7dd3fc;
    }
    .result {
      background: #1e293b;
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      line-height: 1.6;
    }
  </style>
</head>
<body>

  <h1>ðŸš€ Ship Production Calculator</h1>

  <label>Metal available</label>
  <input type="number" id="metal" value="1000">

  <label>He3 available</label>
  <input type="number" id="he3" value="300">

  <label>Gold available</label>
  <input type="number" id="gold" value="50">

  <label>Metal cost per ship</label>
  <input type="number" id="metalCost" value="200">

  <label>He3 cost per ship</label>
  <input type="number" id="he3Cost" value="400">

  <label>Gold cost per ship</label>
  <input type="number" id="goldCost" value="10">

  <label>Conversion rate (metal â†” he3)</label>
  <input type="number" id="conversionRate" step="0.01" value="0.75">

  <label>Build slots</label>
  <input type="number" id="buildSlots" value="5">

  <label>Build time per ship (seconds)</label>
  <input type="number" id="buildTime" value="120">

  <button onclick="calculate()">Calculate</button>

  <div class="result" id="result"></div>

  <script>
    function calculate() {
      const metal = parseFloat(document.getElementById('metal').value);
      const he3 = parseFloat(document.getElementById('he3').value);
      const gold = parseFloat(document.getElementById('gold').value);

      const metalCost = parseFloat(document.getElementById('metalCost').value);
      const he3Cost = parseFloat(document.getElementById('he3Cost').value);
      const goldCost = parseFloat(document.getElementById('goldCost').value);

      const convRate = parseFloat(document.getElementById('conversionRate').value);
      const buildSlots = parseInt(document.getElementById('buildSlots').value);
      const buildTime = parseFloat(document.getElementById('buildTime').value);

      // Solve for X: (metal - X)/metalCost = (he3 + X*convRate)/he3Cost
      const X = (metal / metalCost - he3 / he3Cost) /
                (1.0 / metalCost + convRate / he3Cost);

      const finalMetal = metal - X;
      const finalHe3 = he3 + X * convRate;

      let strategy;
      if (X > 0) {
        strategy = `Convert ${X.toFixed(2)} metal to he3.`;
      } else if (X < 0) {
        strategy = `Convert ${(-X).toFixed(2)} he3 to metal.`;
      } else {
        strategy = "No conversion needed.";
      }

      const ships = Math.floor(Math.min(
        finalMetal / metalCost,
        finalHe3 / he3Cost,
        gold / goldCost
      ));

      const limitMetal = finalMetal / metalCost;
      const limitHe3 = finalHe3 / he3Cost;
      const limitGold = gold / goldCost;

      let limiting;
      if (limitGold <= limitMetal && limitGold <= limitHe3) limiting = "Gold";
      else if (limitMetal <= limitHe3) limiting = "Metal";
      else limiting = "He3";

      const totalBatches = Math.ceil(ships / buildSlots);
      const totalTime = totalBatches * buildTime;

      const minutes = Math.floor(totalTime / 60);
      const seconds = Math.floor(totalTime % 60);

      document.getElementById('result').innerHTML = `
        <strong>You can build:</strong> ${ships} ships<br>
        <strong>Strategy:</strong> ${strategy}<br>
        <strong>Limiting resource:</strong> ${limiting}<br>
        <strong>Build slots:</strong> ${buildSlots}<br>
        <strong>Build time per ship:</strong> ${buildTime} sec<br>
        <strong>Total build time:</strong> ${totalTime.toFixed(2)} sec (${minutes}m ${seconds}s)
      `;
    }
  </script>
</body>
</html>
